%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand \kwd[1]{\mathsf{#1}}
\newcommand \mathpostfix[2][\kwd]{\mathrel{#1{#2}}\mathclose{}}
\newcommand \mathprefix [2][\kwd]{\mathopen{}\mathrel{#1{#2}}}
\newcommand \mathinfix [2][\kwd]{\mathrel{#1{#2}}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Alistair

\newcommand{\Let}{\mathprefix{let}}
\newcommand{\In}{\mathinfix{in}}
\newcommand{\Match}{\mathprefix{match}}
\newcommand{\With}{\mathinfix{with}}

\renewcommand{\c}{C}
\newcommand{\cone}{\c_1}
\newcommand{\ctwo}{\c_2}
\newcommand{\cp}{\c'}
\newcommand{\cv}{\cva}
\newcommand{\cva}{\alpha}
\newcommand{\cvb}{\beta}
\newcommand{\cvc}{\gamma}
\newcommand{\ctrue}{\mathsf{true}}
\newcommand{\cfalse}{\mathsf{false}}
\newcommand{\cexists}[2]{\exists {#1}.\, #2}
\newcommand{\cfor}[2]{\forall {#1}.\, #2}
\newcommand{\cand}{\wedge}
\newcommand{\cunif}[2]{{#1} = {#2}}
\newcommand{\cinst}[2]{#1 \; #2}
\newcommand{\cletin}[3]{\Let #1 = #2 \In #3}
\newcommand{\cabs}[2]{\lambda {#1}. \,{#2}}
\newcommand{\capp}[2]{#1 \; #2}
\newcommand{\cmatch}[3]{\Match #1 \With [ #2 ] #3}
\newcommand{\clam}[2]{\lambda {#1}.\,{#2}}

\newcommand{\cctx}{\mathscr{C}}

\newcommand{\semenv}{\phi}
\newcommand{\semenvp}{\semenv'}

\newcommand{\semmetaenv}{\mathscr{M}}
\newcommand{\semmetav}{\mathscr{X}}

\newcommand{\F}{\mathsf{F}}
\newcommand{\Fapp}{\mathop{}\mathrel{\F}}
\renewcommand{\t}{\tau}
\newcommand{\tp}{\t'}
\newcommand{\tone}{\t_1}
\newcommand{\ttwo}{\t_2}
\newcommand{\ti}{\t_i}
\newcommand{\tj}{\t_j}
\newcommand{\tv}{\tva}
\newcommand{\tvs}{\bar\tv}
\newcommand{\tva}{\alpha}
\newcommand{\tvas}{\bar \tva}
\newcommand{\tvb}{\beta}
\newcommand{\tvbs}{\bar\tvb}
\newcommand{\tvc}{\gamma}
\newcommand{\tvcs}{\bar\tvc}
\newcommand{\tarrow}{\to}
\newcommand{\tfor}[2]{\forall {#1}.\,{#2}}
\newcommand{\tpoly}[1]{[#1]}
\newcommand{\tapoly}[2]{\tpoly{#1}^{#2}}
\newcommand{\tunit}{1}
\newcommand{\tint}{\mathsf{int}}

\renewcommand {\th}{\vdash}
\newcommand {\mlexp}[3][\G]{#1 \th #2: #3}
\newcommand {\mltyp}[3][\G]{#1 \th #2}
\newcommand {\mlsub}[3][\G]{#1 \th #2 \le #3}
\newcommand {\G}{\Gamma}
\newcommand {\iton}[1][n]{_{i=1}^{#1}}

\renewcommand{\@}{\;}

\newcommand{\ifempty}[3]{\ifthenelse{\equal{#1}{}}{#2}{#3}}

\newcommand{\econstr}[2]{#1 \@ #2}
\newcommand{\einst}[2][]{\angles {#2\ifempty{#1}{}{:#1}}}
\newcommand{\exinst}[3]{\angles {#1 : \exists {#2}. \, #3}}
\newcommand{\epoly}[2][]{[#1]\ifempty{#2}{}{:#2}}
\newcommand{\expoly}[2]{\epoly {#1:#2}}
\newcommand{\eunit}{()}
\newcommand{\efun}[2]{\lambda #1. \, #2}
\newcommand{\eapp}[2]{#1 \; #2}
\newcommand{\elet}[3]{\Let #1 = #2 \In #3}
\newcommand{\ematch}[2]{\Match #1 \With #2}
\newcommand{\ecase}[3]{#1 \; #2 \Rightarrow #3}
\newcommand{\efield}[2]{#1.#2}
\newcommand{\exfield}[3]{#1.#3/#2}
%% Could be factored as
\newcommand{\eproj}[3][]{#2.#3\ifempty{#1}{}{/#1}}
\newcommand{\erecord}[1]{\braces{#1}}

\newcommand {\parens}[1]{(#1)}
\newcommand {\braces}[1]{\{#1\}}
\newcommand {\brackets}[1]{[#1]}
\newcommand {\bbrackets}[1]{\llbracket #1\rrbracket}
\newcommand {\angles}[1]{\langle #1\rangle}
\newcommand {\highdelim}[2]{\left#1{#2\right}}
\newcommand {\Parens}[1]{\highdelim\parens {#1}}
\newcommand {\Braces}[1]{\highdelim\braces {#1}}
\newcommand {\Angles}[1]{\highdelim\angles {#1}}
\newcommand {\Bbrackets}[1]{\highdelim\bbrackets {#1}}
\newcommand {\set}[1]{\braces{#1}}
\newcommand {\eset}{\emptyset}
\newcommand {\where}[1]{\brackets {#1}}
\newcommand {\is}{:=}


\newcommand{\cinfer}[2]{\bbrackets {#1 : #2}}

%% \newcommand{\TODO}{\textcolor{red}{TODO}}
\newcommand{\disjoint}{\mathop{\#}}
\newcommand{\shape}{\textsf{shape}}

% Common metas
\newcommand{\e}{e}
\newcommand{\eone}{\e_1}
\newcommand{\etwo}{\e_2}
\newcommand{\ei}{\e_i}
\newcommand{\en}{\e_n}

\newcommand{\C}{C}
\newcommand{\Cone}{\C_1}
\newcommand{\Ctwo}{\C_2}
\newcommand{\Ci}{\C_i}
\newcommand{\Cn}{\C_n}

\newcommand{\sh}{\varsigma}

\newcommand{\sigmaone}{\sigma_1}
\newcommand{\sigmatwo}{\sigma_2}
\newcommand{\sigmai}{\sigma_i}
\newcommand{\sigman}{\sigma_n}

\newcommand{\hf}{f}

\newcommand{\labone}{l_1}
\newcommand{\labtwo}{l_2}
\newcommand{\labi}{l_i}
\newcommand{\labn}{l_n}

\newcommand{\evari}{x_i}

\newcommand{\K}{\mathsf{K}}
\newcommand{\Ki}{\K_i}

\newcommand {\D} {\Delta}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% DR

\RequirePackage{metavar}

%% Types 
%% \defmetavar {\t} {\tau}
%% We could instead use \ty
%% \defmetavar {\ty} {\tau}

%% Expression variables
\defmetavar {\x} {x}
%% Type schemes
\defmetavar {\ts} {\sigma}
\defmetavar {\ty} {\tau}
\defmetavar {\E} {E}
\newcommand {\tss} {\bar\ts}
\newcommand {\tys} {\bar\ty}
%% Annotation variables
\defmetavar {\av} {\varepsilon}

\newcommand{\all}[2]{\forall #1.\,#2}
\newcommand{\exi}[2]{\exists #1.\,#2}

\newcommand{\eqdef}{\mathrel{\triangleq}}
\newcommand \uad [1][1ex]{\hskip #1}
\newcommand \wide[2][\;]{#1 #2 #1}
\newcommand \Wide[2][\uad]{#1 #2 #1}
\newcommand \ftv [1]{\textsf{ftv}(#1)}
\newcommand \cpoly [2]{#1\;\angles{#2}}
\newcommand \ehole {\square}
\newcommand \emagic[1]{\set{#1}}
\newcommand \wild {{\_}}
